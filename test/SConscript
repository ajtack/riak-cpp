Import('env')
Import('library')

compilation_units = [
		Glob('units/*.cxx'),
		Glob('fixtures/*.cxx'),
		Glob('mocks/*.cxx'),
		Glob('mocks/transport/single_serial_socket/*.cxx')
	]

unit_tests = env.Program('unit_tests', compilation_units, LIBS=[library, 'boost_thread-mt', 'pthread', 'boost_system-mt', 'protobuf', 'gmock', 'gtest'])
env.Alias('test', [unit_tests], unit_tests[0].path)
env.AlwaysBuild('test')
Return('unit_tests')
